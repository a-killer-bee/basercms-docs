# サブサイト編集仕様（作成中）

## 基本仕様
- サイト基本設定で設定してる情報をHOMEとし、サイト構造上、最上位のサイトとし、特別な扱いとする。
- メインサイトを選択し子サイトとして登録する事ができる。子サイトとして登録した場合、サイト内の同階層のコンテンツを連携する事ができる。デフォルトはHOMEとなり、HOMEと連携する。
- サイトごとにタイトルタグを切り替える事ができる。
- サイトごとにテーマを切り替える事ができる。HOMEのテーマは、テーマ管理で設定したテーマとする。
- 初期データは、HOMEに設定されたテーマの初期データを利用する。
- フロントページでは、識別名称をサブフォルダとしたURLでコンテンツを参照する事ができる。
- URLにおいて識別名称とは別の別名が利用できる。（例：smartphone → sp）
- 識別名称では、スラッシュ（/）、アンダースコア（_）、ドット（.）を許容する

## 追加機能仕様
- 保存時に、サイトルートとなるフォルダを自動生成する。

## 編集機能仕様
- 保存時に、サイトルートとなるフォルダのタイトル、公開状態を更新する。
- HOMEを更新する場合は、サイト基本設定で変更する。
- サイトルートフォルダでは、タイトルや公開状態は変更する事はできず、サブサイト編集から変更する。

## 削除機能仕様

## メインサイト設定
- メインサイトを設定する事でサイト内の同階層のコンテンツを連携する事ができる。
- サブサイトをメインサイトとして登録する事ができる。


	（例）英語サイト[en] をメインサイトとして、スマートフォンサイト[en/sp] を子サイトとして登録する場合  
	/en/about/index
	/en/sp/about/index


## テンプレートのサブフォルダ化
各テンプレートを作成する際、通常配置するフォルダ配下に、サイトの識別名称と同じ名称のフォルダを作成し、その中にテンプレートを配置するとフロントページを表示する際、そちらのテンプレートを優先して利用する。

	（例）識別名称が smartphone で、レイアウトテンプレートに default を利用する場合
	Layouts/default.php
	Layouts/smartphone/default.php ←こちらが優先となる
	
## メインサイト自動連携
エイリアスを利用してメインサイトと自動連携する事ができる。  

- メインサイトにコンテンツを作成する度にサブサイトに自動的にエイリアスを作成する。
- メインサイトに作成したものがエイリアスの場合は無視する。
- 既にサブサイトの同一階層にコンテンツが存在する場合は無視する。
- 既に連携状態でメインサイトのコンテンツのURLを変更しようとした場合、子サイトに同名のコンテンツが存在すれば、警告を表示し処理を中断する。
- 自動連携を設定している場合、サブサイトのエイリアスはURL以外の編集を行う事できない。
- サブサイトのエイリアスのURLを変更した場合、連携状態は解除となる。
- メインサイトのコンテンツを削除した場合、子サイトのエイリアスはゴミ箱に入れず完全に削除する。
- メインサイトのコンテンツを削除した場合、子サイトの関連コンテンツはエイリアスでない場合、連携状態は解除となる。


| タイプ | メインURL変更 | メイン編集 | メイン削除 | サブURL変更 | サブ編集 | サブ削除 |
|---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|
| エイリアス | 連携 | 連携 | 完全削除 | 連携解除 | 不可 | 可 |
| コンテンツ | 連携 | 連携なし | 連携なし | 連携解除 | 可 | 可 |
| フォルダ | 連携 | 連携 | 連携解除 | 連携解除 | 不可 | 可 |



